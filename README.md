# Address-merge-js
Пример простого прототипа логики, объединяющей адреса, полученные от одного или разных сирвисов геокодирования.

## Идея
Имеется набор адресов, полученных из разных источников. Для некоторых адресов присутствует результат их геокодинга.

Требуется объединить дубликаты.

## Логика
Удаляем стоп-слова, лишние символы. объединяем записи, имеющие определённую степень схожести по написанию и набору цифр (цифры в адресе особенно важны). Объединяются только адреса без координат, либо адреса, расстояние по данным коордиинатам для которых не превышает заданный допуск.

## Пример
Например: есть некоторый набор адресов (11 адресов, 5 уникальных, 1 сильно изменённый, 5 дубликатов). Для большинства адресов есть координаты и приоритет (вес) данного варианта. Вес может, например, определяться точнотью координат, заявленной источником, откуда он был получен.

```javascript
    var elements = geoMerge([
          new address({name: 'лубянская кажется площадь', lat: 55.759664, lon: 37.626690, weight: 0}),
          // Если поменять предыдущее значение на это -- сработает фактор расстояния и результатов станет на один больше
                                                                       // lon: 38.626790
          new address({name: 'площадь лубянская 5 корп1', lat: 55.759664, lon: 37.626790, weight: 0}),
          new address({name: 'лубянская 5 корпус 1', weight: 0}),
          new address({name: 'плОщадь лУбянская дом 5 корп1', lat: 55.759664, lon: 37.626795, weight: 1}),
          new address({name: 'лубянская 5к1', lat: 55.759664, lon: 37.626795, weight: 1}),

          new address({name: 'Марксистская улица, 4', lat: 55.739950, lon: 37.656371, weight: 1}),
          new address({name: 'Марксистская улица, 4с2', lat: 55.739950, lon: 37.656371, weight: 0}),
          new address({name: 'Марксистская улица, 4 строение 2', lat: 55.739950, lon: 37.656371, weight: 1}),
          new address({name: 'Россия, Москва, Марксистская улица, 4, строение 2', lat: 55.739950, lon: 37.656371, weight: 1}),

          new address({name: 'Тверская ул., 4, Москва, Россия, 125009', lat: 55.739950, lon: 37.656371, weight: 1}),
          new address({name: 'г Москва, ул Тверская-Ямская 4-Я', lat: 55.739950, lon: 37.656371, weight: 1}),
    ]);
```

Результат объединения (6 адресов):

```text
Марксистская улица, 4
Марксистская улица, 4 строение 2
Тверская ул., 4, Москва, Россия, 125009
г Москва, ул Тверская-Ямская 4-Я
лубянская кажется площадь
плОщадь лУбянская дом 5 корп1
```
